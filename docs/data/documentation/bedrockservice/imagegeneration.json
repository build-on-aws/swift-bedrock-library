{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/bedrockservice\/imagegeneration"]}],"identifier":{"url":"doc:\/\/BedrockService\/documentation\/BedrockService\/ImageGeneration","interfaceLanguage":"swift"},"seeAlsoSections":[{"anchor":"Related-Documentation","identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","doc:\/\/BedrockService\/documentation\/BedrockService\/Converse"],"title":"Related Documentation"},{"generated":true,"identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","doc:\/\/BedrockService\/documentation\/BedrockService\/TextGeneration","doc:\/\/BedrockService\/documentation\/BedrockService\/Embeddings"],"anchor":"Core-Features","title":"Core Features"}],"kind":"article","metadata":{"modules":[{"name":"BedrockService"}],"roleHeading":"Article","role":"article","title":"Image Generation"},"schemaVersion":{"minor":3,"patch":0,"major":0},"sections":[],"hierarchy":{"paths":[["doc:\/\/BedrockService\/documentation\/BedrockService"]]},"primaryContentSections":[{"content":[{"text":"Overview","anchor":"Overview","type":"heading","level":2},{"inlineContent":[{"text":"BedrockService supports image generation and variation capabilities, allowing you to create images from text descriptions and generate variations of existing images.","type":"text"}],"type":"paragraph"},{"anchor":"Text-to-Image-Generation","type":"heading","level":2,"text":"Text-to-Image Generation"},{"inlineContent":[{"text":"Generate images from text descriptions:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let model: BedrockModel = .nova_canvas","","guard model.hasImageModality(),","      model.hasTextToImageModality() else {","    throw MyError.incorrectModality(\"\\(model.name) does not support image generation\")","}","","let imageGeneration = try await bedrock.generateImage(","    \"A serene landscape with mountains at sunset\",","    with: model",")","","\/\/ Access generated images","for (index, image) in imageGeneration.images.enumerated() {","    print(\"Generated image \\(index + 1): \\(image.prefix(50))...\")","}"]},{"anchor":"Generation-Parameters","type":"heading","level":2,"text":"Generation Parameters"},{"inlineContent":[{"text":"Control image generation with various parameters:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let imageGeneration = try await bedrock.generateImage(","    \"A futuristic city skyline at night\",","    with: model,","    negativePrompt: \"dark, gloomy, abandoned\",","    nrOfImages: 3,","    cfgScale: 7.0,","    seed: 42,","    quality: .standard,","    resolution: ImageResolution(width: 1024, height: 1024)",")"]},{"anchor":"Available-Parameters","type":"heading","level":3,"text":"Available Parameters"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"negativePrompt"}],"type":"strong"},{"text":": Describe what to avoid in the image","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"nrOfImages"}],"type":"strong"},{"text":": Number of images to generate (1-4 typically)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"cfgScale"}],"type":"strong"},{"text":": How closely to follow the prompt (1.0-20.0)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"seed"}],"type":"strong"},{"text":": For reproducible results","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"quality"}],"type":"strong"},{"text":": Image quality setting (","type":"text"},{"code":".standard","type":"codeVoice"},{"text":", ","type":"text"},{"code":".premium","type":"codeVoice"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"resolution"}],"type":"strong"},{"text":": Output image dimensions","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Image-Variations","type":"heading","level":2,"text":"Image Variations"},{"inlineContent":[{"text":"Create variations of existing images:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let model: BedrockModel = .nova_canvas","","guard model.hasImageModality(),","      model.hasImageVariationModality() else {","    throw MyError.incorrectModality(\"\\(model.name) does not support image variations\")","}","","let imageVariations = try await bedrock.generateImageVariation(","    images: [base64EncodedImage],","    prompt: \"A dog drinking from this teacup\",","    with: model",")"]},{"anchor":"Variation-Parameters","type":"heading","level":2,"text":"Variation Parameters"},{"inlineContent":[{"text":"Fine-tune image variations:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let imageVariations = try await bedrock.generateImageVariation(","    images: [base64EncodedImage],","    prompt: \"Transform this into a watercolor painting\",","    with: model,","    negativePrompt: \"photorealistic, sharp edges\",","    similarity: 0.8,","    nrOfVariations: 4,","    cfgScale: 7.0,","    seed: 123,","    quality: .premium,","    resolution: ImageResolution(width: 512, height: 512)",")"]},{"anchor":"Variation-Specific-Parameters","type":"heading","level":3,"text":"Variation-Specific Parameters"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"text":"similarity","type":"text"}],"type":"strong"},{"type":"text","text":": How similar variations should be to source (0.0-1.0)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"nrOfVariations","type":"text"}],"type":"strong"},{"type":"text","text":": Number of variations to create"}],"type":"paragraph"}]}]},{"anchor":"Working-with-Image-Data","type":"heading","level":2,"text":"Working with Image Data"},{"inlineContent":[{"text":"Handle base64-encoded image data:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["\/\/ Convert image file to base64","func loadImageAsBase64(from path: String) -> String? {","    guard let imageData = FileManager.default.contents(atPath: path) else {","        return nil","    }","    return imageData.base64EncodedString()","}","","\/\/ Save generated image","func saveBase64Image(_ base64String: String, to path: String) {","    guard let imageData = Data(base64Encoded: base64String) else {","        print(\"Invalid base64 data\")","        return","    }","    ","    do {","        try imageData.write(to: URL(fileURLWithPath: path))","        print(\"Image saved to \\(path)\")","    } catch {","        print(\"Failed to save image: \\(error)\")","    }","}","","\/\/ Usage","if let sourceImage = loadImageAsBase64(from: \"input.jpg\") {","    let variations = try await bedrock.generateImageVariation(","        images: [sourceImage],","        prompt: \"Make this image look like a vintage photograph\",","        with: model","    )","    ","    for (index, image) in variations.images.enumerated() {","        saveBase64Image(image, to: \"variation_\\(index).jpg\")","    }","}"]},{"anchor":"Model-Specific-Capabilities","type":"heading","level":2,"text":"Model-Specific Capabilities"},{"inlineContent":[{"text":"Different models support different features:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["\/\/ Check model capabilities","let model: BedrockModel = .nova_canvas","","if model.hasTextToImageModality() {","    print(\"Supports text-to-image generation\")","}","","if model.hasImageVariationModality() {","    print(\"Supports image variations\")","}","","\/\/ Get model-specific parameter limits","if let imageModality = model.modality as? ImageModality {","    let params = imageModality.getImageGenerationParameters()","    print(\"Max images: \\(params.nrOfImages.maxValue ?? \"unlimited\")\")","    print(\"CFG scale range: \\(params.cfgScale.minValue)-\\(params.cfgScale.maxValue ?? 20)\")","}"]},{"anchor":"Error-Handling","type":"heading","level":2,"text":"Error Handling"},{"inlineContent":[{"text":"Handle common image generation errors:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["do {","    let images = try await bedrock.generateImage(","        \"A beautiful sunset over the ocean\",","        with: model,","        nrOfImages: 5 \/\/ Might exceed model limit","    )","} catch BedrockServiceError.parameterOutOfRange(let parameter, let value, let range) {","    print(\"Parameter \\(parameter) value \\(value) is outside allowed range: \\(range)\")","} catch BedrockServiceError.notSupported(let feature) {","    print(\"Feature not supported: \\(feature)\")","} catch {","    print(\"Image generation failed: \\(error)\")","}"]}],"kind":"content"}],"abstract":[{"text":"Create and modify images with foundation models","type":"text"}],"references":{"doc://BedrockService/documentation/BedrockService":{"type":"topic","title":"BedrockService","url":"\/documentation\/bedrockservice","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService","role":"collection","images":[{"type":"icon","identifier":"bedrock.png"}],"kind":"symbol","abstract":[{"type":"text","text":"A Swift library for interacting with Amazon Bedrock foundation models"}]},"doc://BedrockService/documentation/BedrockService/TextGeneration":{"url":"\/documentation\/bedrockservice\/textgeneration","type":"topic","role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/TextGeneration","title":"Text Generation","kind":"article","abstract":[{"type":"text","text":"Generate text using the InvokeModel API"}]},"doc://BedrockService/documentation/BedrockService/Converse":{"url":"\/documentation\/bedrockservice\/converse","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","abstract":[{"type":"text","text":"Build conversational AI applications with the Converse API"}],"type":"topic","role":"article","kind":"article","title":"Converse API"},"doc://BedrockService/documentation/BedrockService/Vision":{"url":"\/documentation\/bedrockservice\/vision","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","abstract":[{"type":"text","text":"Add images to your conversations"}],"type":"topic","role":"article","kind":"article","title":"Vision"},"doc://BedrockService/documentation/BedrockService/Embeddings":{"abstract":[{"type":"text","text":"Generate vector embeddings for semantic analysis"}],"identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Embeddings","type":"topic","url":"\/documentation\/bedrockservice\/embeddings","role":"article","kind":"article","title":"Embeddings"},"bedrock.png":{"identifier":"bedrock.png","variants":[{"traits":["1x","light"],"url":"\/images\/BedrockService\/bedrock.png"}],"alt":"BedrockService","type":"image"}}}