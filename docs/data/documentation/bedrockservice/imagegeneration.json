{"identifier":{"url":"doc:\/\/BedrockService\/documentation\/BedrockService\/ImageGeneration","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"BedrockService supports image generation and variation capabilities, allowing you to create images from text descriptions and generate variations of existing images."}]},{"anchor":"Text-to-Image-Generation","type":"heading","level":2,"text":"Text-to-Image Generation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Generate images from text descriptions:"}]},{"syntax":"swift","type":"codeListing","code":["let model: BedrockModel = .nova_canvas","","guard model.hasImageModality(),","      model.hasTextToImageModality() else {","    throw MyError.incorrectModality(\"\\(model.name) does not support image generation\")","}","","let imageGeneration = try await bedrock.generateImage(","    \"A serene landscape with mountains at sunset\",","    with: model",")","","\/\/ Access generated images","for (index, image) in imageGeneration.images.enumerated() {","    print(\"Generated image \\(index + 1): \\(image.prefix(50))...\")","}"]},{"anchor":"Generation-Parameters","type":"heading","level":2,"text":"Generation Parameters"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Control image generation with various parameters:"}]},{"syntax":"swift","type":"codeListing","code":["let imageGeneration = try await bedrock.generateImage(","    \"A futuristic city skyline at night\",","    with: model,","    negativePrompt: \"dark, gloomy, abandoned\",","    nrOfImages: 3,","    cfgScale: 7.0,","    seed: 42,","    quality: .standard,","    resolution: ImageResolution(width: 1024, height: 1024)",")"]},{"anchor":"Available-Parameters","type":"heading","level":3,"text":"Available Parameters"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"negativePrompt"}],"type":"strong"},{"text":": Describe what to avoid in the image","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"nrOfImages"}],"type":"strong"},{"text":": Number of images to generate (1-4 typically)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"cfgScale"}],"type":"strong"},{"text":": How closely to follow the prompt (1.0-20.0)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"seed"}],"type":"strong"},{"text":": For reproducible results","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"quality"}],"type":"strong"},{"text":": Image quality setting (","type":"text"},{"code":".standard","type":"codeVoice"},{"text":", ","type":"text"},{"code":".premium","type":"codeVoice"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"resolution"}],"type":"strong"},{"text":": Output image dimensions","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Image-Variations","type":"heading","level":2,"text":"Image Variations"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create variations of existing images:"}]},{"syntax":"swift","type":"codeListing","code":["let model: BedrockModel = .nova_canvas","","guard model.hasImageModality(),","      model.hasImageVariationModality() else {","    throw MyError.incorrectModality(\"\\(model.name) does not support image variations\")","}","","let imageVariations = try await bedrock.generateImageVariation(","    images: [base64EncodedImage],","    prompt: \"A dog drinking from this teacup\",","    with: model",")"]},{"anchor":"Variation-Parameters","type":"heading","level":2,"text":"Variation Parameters"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Fine-tune image variations:"}]},{"syntax":"swift","type":"codeListing","code":["let imageVariations = try await bedrock.generateImageVariation(","    images: [base64EncodedImage],","    prompt: \"Transform this into a watercolor painting\",","    with: model,","    negativePrompt: \"photorealistic, sharp edges\",","    similarity: 0.8,","    nrOfVariations: 4,","    cfgScale: 7.0,","    seed: 123,","    quality: .premium,","    resolution: ImageResolution(width: 512, height: 512)",")"]},{"anchor":"Variation-Specific-Parameters","type":"heading","level":3,"text":"Variation-Specific Parameters"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"similarity"}],"type":"strong"},{"text":": How similar variations should be to source (0.0-1.0)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"nrOfVariations"}],"type":"strong"},{"text":": Number of variations to create","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Working-with-Image-Data","type":"heading","level":2,"text":"Working with Image Data"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Handle base64-encoded image data:"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ Convert image file to base64","func loadImageAsBase64(from path: String) -> String? {","    guard let imageData = FileManager.default.contents(atPath: path) else {","        return nil","    }","    return imageData.base64EncodedString()","}","","\/\/ Save generated image","func saveBase64Image(_ base64String: String, to path: String) {","    guard let imageData = Data(base64Encoded: base64String) else {","        print(\"Invalid base64 data\")","        return","    }","    ","    do {","        try imageData.write(to: URL(fileURLWithPath: path))","        print(\"Image saved to \\(path)\")","    } catch {","        print(\"Failed to save image: \\(error)\")","    }","}","","\/\/ Usage","if let sourceImage = loadImageAsBase64(from: \"input.jpg\") {","    let variations = try await bedrock.generateImageVariation(","        images: [sourceImage],","        prompt: \"Make this image look like a vintage photograph\",","        with: model","    )","    ","    for (index, image) in variations.images.enumerated() {","        saveBase64Image(image, to: \"variation_\\(index).jpg\")","    }","}"]},{"anchor":"Model-Specific-Capabilities","type":"heading","level":2,"text":"Model-Specific Capabilities"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Different models support different features:"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ Check model capabilities","let model: BedrockModel = .nova_canvas","","if model.hasTextToImageModality() {","    print(\"Supports text-to-image generation\")","}","","if model.hasImageVariationModality() {","    print(\"Supports image variations\")","}","","\/\/ Get model-specific parameter limits","if let imageModality = model.modality as? ImageModality {","    let params = imageModality.getImageGenerationParameters()","    print(\"Max images: \\(params.nrOfImages.maxValue ?? \"unlimited\")\")","    print(\"CFG scale range: \\(params.cfgScale.minValue)-\\(params.cfgScale.maxValue ?? 20)\")","}"]},{"anchor":"Error-Handling","type":"heading","level":2,"text":"Error Handling"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Handle common image generation errors:"}]},{"syntax":"swift","type":"codeListing","code":["do {","    let images = try await bedrock.generateImage(","        \"A beautiful sunset over the ocean\",","        with: model,","        nrOfImages: 5 \/\/ Might exceed model limit","    )","} catch BedrockServiceError.parameterOutOfRange(let parameter, let value, let range) {","    print(\"Parameter \\(parameter) value \\(value) is outside allowed range: \\(range)\")","} catch BedrockServiceError.notSupported(let feature) {","    print(\"Feature not supported: \\(feature)\")","} catch {","    print(\"Image generation failed: \\(error)\")","}"]}]}],"hierarchy":{"paths":[["doc:\/\/BedrockService\/documentation\/BedrockService"]]},"variants":[{"paths":["\/documentation\/bedrockservice\/imagegeneration"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"modules":[{"name":"BedrockService"}],"roleHeading":"Article","title":"Image Generation","role":"article"},"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"Create and modify images with foundation models"}],"seeAlsoSections":[{"title":"Related Documentation","anchor":"Related-Documentation","identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","doc:\/\/BedrockService\/documentation\/BedrockService\/Converse"]},{"title":"Core Features","generated":true,"identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","doc:\/\/BedrockService\/documentation\/BedrockService\/TextGeneration","doc:\/\/BedrockService\/documentation\/BedrockService\/Embeddings"],"anchor":"Core-Features"}],"sections":[],"references":{"doc://BedrockService/documentation/BedrockService":{"url":"\/documentation\/bedrockservice","images":[{"identifier":"bedrock.png","type":"icon"}],"type":"topic","kind":"symbol","title":"BedrockService","abstract":[{"text":"A Swift library for interacting with Amazon Bedrock foundation models","type":"text"}],"role":"collection","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService"},"doc://BedrockService/documentation/BedrockService/Converse":{"url":"\/documentation\/bedrockservice\/converse","type":"topic","kind":"article","role":"article","abstract":[{"type":"text","text":"Build conversational AI applications with the Converse API"}],"identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","title":"Converse API"},"doc://BedrockService/documentation/BedrockService/TextGeneration":{"url":"\/documentation\/bedrockservice\/textgeneration","title":"Text Generation","kind":"article","abstract":[{"text":"Generate text using the InvokeModel API","type":"text"}],"role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/TextGeneration","type":"topic"},"doc://BedrockService/documentation/BedrockService/Embeddings":{"kind":"article","type":"topic","url":"\/documentation\/bedrockservice\/embeddings","role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Embeddings","abstract":[{"text":"Generate vector embeddings for semantic analysis","type":"text"}],"title":"Embeddings"},"doc://BedrockService/documentation/BedrockService/Vision":{"url":"\/documentation\/bedrockservice\/vision","type":"topic","kind":"article","title":"Vision","abstract":[{"text":"Add images to your conversations","type":"text"}],"role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Vision"},"bedrock.png":{"identifier":"bedrock.png","type":"image","alt":"BedrockService","variants":[{"url":"\/images\/BedrockService\/bedrock.png","traits":["1x","light"]}]}}}