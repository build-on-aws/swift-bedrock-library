{"identifier":{"url":"doc:\/\/BedrockService\/documentation\/BedrockService\/Tools","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","level":2,"anchor":"Overview","type":"heading"},{"inlineContent":[{"text":"Tools allow foundation models to call external functions, enabling them to access real-time data, perform calculations, and interact with external systems.","type":"text"}],"type":"paragraph"},{"anchor":"Basic-Tool-Usage","type":"heading","text":"Basic Tool Usage","level":2},{"inlineContent":[{"type":"text","text":"Define and use a simple tool:"}],"type":"paragraph"},{"code":["let model: BedrockModel = .nova_lite","","guard model.hasConverseModality(.toolUse) else {","    throw MyError.incorrectModality(\"\\(model.name) does not support tools\")","}","","\/\/ Define the tool's input schema","let inputSchema = JSON([","    \"type\": \"object\",","    \"properties\": [","        \"sign\": [","            \"type\": \"string\",","            \"description\": \"Radio station call sign (e.g., WZPZ, WKRP)\"","        ]","    ],","    \"required\": [\"sign\"]","])","","\/\/ Create the tool","let tool = try Tool(","    name: \"top_song\",","    inputSchema: inputSchema,","    description: \"Get the most popular song on a radio station\"",")","","\/\/ Use the tool in a conversation","var builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"What is the most popular song on WZPZ?\")","    .withTool(tool)","","var reply = try await bedrock.converse(with: builder)","","\/\/ Handle tool use request","if let toolUse = try? reply.getToolUse() {","    let sign: String? = toolUse.input[\"sign\"]","    let result = getMostPopularSong(for: sign ?? \"\")","    ","    builder = try ConverseRequestBuilder(from: builder, with: reply)","        .withToolResult(result)","    ","    reply = try await bedrock.converse(with: builder)","}","","print(\"Assistant: \\(reply)\")"],"syntax":"swift","type":"codeListing"},{"level":2,"anchor":"Multiple-Tools","text":"Multiple Tools","type":"heading"},{"inlineContent":[{"text":"Add multiple tools to expand capabilities:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let weatherTool = try Tool(","    name: \"get_weather\",","    inputSchema: JSON([","        \"type\": \"object\",","        \"properties\": [","            \"location\": [\"type\": \"string\", \"description\": \"City name\"]","        ],","        \"required\": [\"location\"]","    ]),","    description: \"Get current weather for a location\"",")","","let calculatorTool = try Tool(","    name: \"calculate\",","    inputSchema: JSON([","        \"type\": \"object\", ","        \"properties\": [","            \"expression\": [\"type\": \"string\", \"description\": \"Math expression to evaluate\"]","        ],","        \"required\": [\"expression\"]","    ]),","    description: \"Perform mathematical calculations\"",")","","let builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"What's the weather in Paris and what's 15 * 23?\")","    .withTools([weatherTool, calculatorTool])"],"type":"codeListing"},{"level":2,"anchor":"Tool-Result-Types","text":"Tool Result Types","type":"heading"},{"inlineContent":[{"text":"Return different types of data as tool results:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ String result","builder = try ConverseRequestBuilder(from: builder, with: reply)","    .withToolResult(\"Sunny, 22°C\")","","\/\/ JSON result","let weatherData = [\"temperature\": 22, \"condition\": \"sunny\"]","builder = try ConverseRequestBuilder(from: builder, with: reply)","    .withToolResult(weatherData)","","\/\/ Custom Codable type","struct WeatherInfo: Codable {","    let temperature: Int","    let condition: String","}","","let weather = WeatherInfo(temperature: 22, condition: \"sunny\")","builder = try ConverseRequestBuilder(from: builder, with: reply)","    .withToolResult(weather)"],"type":"codeListing"},{"level":2,"anchor":"Interactive-Tool-Usage","text":"Interactive Tool Usage","type":"heading"},{"inlineContent":[{"text":"Build an interactive system with multiple tool calls:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["var builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"Introduce yourself and mention your available tools\")","    .withTools([weatherTool, calculatorTool])","","while true {","    let reply = try await bedrock.converse(with: builder)","    ","    if let toolUse = try? reply.getToolUse() {","        let result = handleToolUse(toolUse)","        builder = try ConverseRequestBuilder(from: builder, with: reply)","            .withToolResult(result)","    } else {","        print(\"Assistant: \\(reply)\")","        print(\"You: \")","        guard let prompt = readLine(), prompt != \"quit\" else { break }","        ","        builder = try ConverseRequestBuilder(from: builder, with: reply)","            .withPrompt(prompt)","    }","}","","func handleToolUse(_ toolUse: ToolUseBlock) -> String {","    switch toolUse.name {","    case \"get_weather\":","        let location: String? = toolUse.input[\"location\"]","        return getWeather(for: location ?? \"\")","    case \"calculate\":","        let expression: String? = toolUse.input[\"expression\"]","        return calculate(expression ?? \"\")","    default:","        return \"Unknown tool\"","    }","}"],"type":"codeListing"},{"level":2,"anchor":"Streaming-with-Tools","text":"Streaming with Tools","type":"heading"},{"inlineContent":[{"text":"Tools work seamlessly with streaming:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let stream = try await bedrock.converseStream(with: builder)","","for try await element in stream {","    switch element {","    case .text(_, let text):","        print(text, terminator: \"\")","    case .toolUse(let index, let toolUse):","        print(\"Tool requested: \\(toolUse.name)\")","    case .messageComplete(let message):","        \/\/ Handle tool use from complete message","        break","    default:","        break","    }","}"],"type":"codeListing"},{"level":2,"anchor":"JSON-Schema-Helper","text":"JSON Schema Helper","type":"heading"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"JSON"},{"type":"text","text":" struct provides convenient schema creation:"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ From dictionary","let schema = JSON([","    \"type\": \"object\",","    \"properties\": [","        \"query\": [\"type\": \"string\"]","    ]","])","","\/\/ From JSON string","let jsonString = \"\"\"","{","    \"type\": \"object\",","    \"properties\": {","        \"location\": {\"type\": \"string\"},","        \"units\": {\"type\": \"string\", \"enum\": [\"celsius\", \"fahrenheit\"]}","    },","    \"required\": [\"location\"]","}","\"\"\"","let schema = try JSON(from: jsonString)","","\/\/ Access values","let location: String? = toolUse.input[\"location\"]","let units: String? = toolUse.input[\"units\"]"],"type":"codeListing"}]}],"hierarchy":{"paths":[["doc:\/\/BedrockService\/documentation\/BedrockService"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/bedrockservice\/tools"]}],"metadata":{"modules":[{"name":"BedrockService"}],"roleHeading":"Article","title":"Tools","role":"article"},"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"text":"Enable function calling with foundation models","type":"text"}],"seeAlsoSections":[{"title":"Related Documentation","identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming"],"anchor":"Related-Documentation"},{"title":"Advanced Topics","identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","doc:\/\/BedrockService\/documentation\/BedrockService\/Documents","doc:\/\/BedrockService\/documentation\/BedrockService\/Reasoning","doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming"],"anchor":"Advanced-Topics","generated":true}],"sections":[],"references":{"doc://BedrockService/documentation/BedrockService/Vision":{"url":"\/documentation\/bedrockservice\/vision","type":"topic","kind":"article","title":"Vision","abstract":[{"text":"Add images to your conversations","type":"text"}],"role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Vision"},"doc://BedrockService/documentation/BedrockService/Documents":{"url":"\/documentation\/bedrockservice\/documents","title":"Documents","kind":"article","abstract":[{"text":"Process documents with foundation models","type":"text"}],"role":"article","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Documents","type":"topic"},"bedrock.png":{"type":"image","identifier":"bedrock.png","variants":[{"url":"\/images\/BedrockService\/bedrock.png","traits":["1x","light"]}],"alt":"BedrockService"},"doc://BedrockService/documentation/BedrockService/Streaming":{"url":"\/documentation\/bedrockservice\/streaming","type":"topic","kind":"article","role":"article","abstract":[{"type":"text","text":"Get real-time responses with streaming"}],"identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming","title":"Streaming"},"doc://BedrockService/documentation/BedrockService":{"url":"\/documentation\/bedrockservice","images":[{"identifier":"bedrock.png","type":"icon"}],"type":"topic","kind":"symbol","title":"BedrockService","abstract":[{"text":"A Swift library for interacting with Amazon Bedrock foundation models","type":"text"}],"role":"collection","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService"},"doc://BedrockService/documentation/BedrockService/Converse":{"url":"\/documentation\/bedrockservice\/converse","type":"topic","kind":"article","role":"article","abstract":[{"type":"text","text":"Build conversational AI applications with the Converse API"}],"identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","title":"Converse API"},"doc://BedrockService/documentation/BedrockService/Reasoning":{"title":"Reasoning","kind":"article","type":"topic","role":"article","abstract":[{"text":"Access the model’s reasoning process","type":"text"}],"identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Reasoning","url":"\/documentation\/bedrockservice\/reasoning"}}}