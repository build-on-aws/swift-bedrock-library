{"primaryContentSections":[{"content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Reasoning capabilities allow you to see how foundation models think through problems, providing transparency into their decision-making process.","type":"text"}]},{"text":"Basic Reasoning","type":"heading","level":2,"anchor":"Basic-Reasoning"},{"type":"paragraph","inlineContent":[{"text":"Enable reasoning to see the modelâ€™s thought process:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let model: BedrockModel = .claudev3_7_sonnet","","guard model.hasConverseModality(.reasoning) else {","    throw MyError.incorrectModality(\"\\(model.name) does not support reasoning\")","}","","let builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"Solve this math problem: If a train travels 60 mph for 2.5 hours, how far does it go?\")","    .withReasoning()","","let reply = try await bedrock.converse(with: builder)","","if let reasoning = try? reply.getReasoningBlock() {","    print(\"Reasoning: \\(reasoning.reasoning)\")","}","print(\"Answer: \\(reply)\")"]},{"text":"Reasoning with Token Limits","type":"heading","level":2,"anchor":"Reasoning-with-Token-Limits"},{"type":"paragraph","inlineContent":[{"text":"Control the length of reasoning output:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"Explain the causes of World War I\")","    .withReasoning(maxReasoningTokens: 1024)","","let reply = try await bedrock.converse(with: builder)"]},{"text":"Streaming Reasoning","type":"heading","level":2,"anchor":"Streaming-Reasoning"},{"type":"paragraph","inlineContent":[{"text":"See reasoning unfold in real-time:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let builder = try ConverseRequestBuilder(with model)","    .withPrompt(\"Plan a 7-day trip to Japan\")","    .withReasoning(maxReasoningTokens: 2048)","","let stream = try await bedrock.converseStream(with: builder)","","var reasoningIndexes: [Int] = []","var textIndexes: [Int] = []","","for try await element in stream {","    switch element {","    case .reasoning(let index, let reasoning):","        if !reasoningIndexes.contains(index) {","            reasoningIndexes.append(index)","            print(\"\\nðŸ¤” Reasoning: \")","        }","        print(reasoning, terminator: \"\")","        ","    case .text(let index, let text):","        if !textIndexes.contains(index) {","            textIndexes.append(index)","            print(\"\\nðŸ’¬ Response: \")","        }","        print(text, terminator: \"\")","        ","    case .messageComplete(_):","        print(\"\\n\")","        ","    default:","        break","    }","}"]},{"text":"Complex Problem Solving","type":"heading","level":2,"anchor":"Complex-Problem-Solving"},{"type":"paragraph","inlineContent":[{"text":"Use reasoning for multi-step problems:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"\"\"","        A company has 150 employees. 60% work in engineering, 25% in sales, ","        and the rest in administration. If engineering gets a 10% budget increase ","        and sales gets a 5% increase, what's the total percentage increase ","        in employee-related costs?","        \"\"\")","    .withReasoning()","    .withTemperature(0.1) \/\/ Lower temperature for more focused reasoning","","let reply = try await bedrock.converse(with: builder)","","if let reasoning = try? reply.getReasoningBlock() {","    print(\"Step-by-step reasoning:\")","    print(reasoning.reasoning)","    print(\"\\nFinal answer:\")","}","print(reply)"]},{"text":"Reasoning in Conversations","type":"heading","level":2,"anchor":"Reasoning-in-Conversations"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Maintain reasoning across conversation turns:"}]},{"type":"codeListing","syntax":"swift","code":["var builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"I need to choose between two job offers. Can you help me think through this?\")","    .withReasoning()","","var reply = try await bedrock.converse(with: builder)","","if let reasoning = try? reply.getReasoningBlock() {","    print(\"Initial reasoning: \\(reasoning.reasoning)\")","}","print(\"Assistant: \\(reply)\")","","\/\/ Continue with more details","builder = try ConverseRequestBuilder(from: builder, with: reply)","    .withPrompt(\"\"\"","        Job A: $80k salary, great benefits, 30-minute commute, startup environment","        Job B: $75k salary, okay benefits, 10-minute commute, established company","        \"\"\")","    .withReasoning()","","reply = try await bedrock.converse(with: builder)","","if let reasoning = try? reply.getReasoningBlock() {","    print(\"Analysis reasoning: \\(reasoning.reasoning)\")","}","print(\"Assistant: \\(reply)\")"]},{"text":"Reasoning with Tools","type":"heading","level":2,"anchor":"Reasoning-with-Tools"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Combine reasoning with function calling:"}]},{"type":"codeListing","syntax":"swift","code":["let calculatorTool = try Tool(","    name: \"calculate\",","    inputSchema: JSON([","        \"type\": \"object\",","        \"properties\": [","            \"expression\": [\"type\": \"string\"]","        ],","        \"required\": [\"expression\"]","    ]),","    description: \"Perform mathematical calculations\"",")","","let builder = try ConverseRequestBuilder(with: model)","    .withPrompt(\"Calculate the compound interest on $1000 at 5% annually for 3 years\")","    .withTool(calculatorTool)","    .withReasoning()","","let reply = try await bedrock.converse(with: builder)","","\/\/ The model will reason about the problem and potentially use the calculator tool","if let reasoning = try? reply.getReasoningBlock() {","    print(\"Reasoning: \\(reasoning.reasoning)\")","}","","if let toolUse = try? reply.getToolUse() {","    let expression: String? = toolUse.input[\"expression\"]","    let result = calculate(expression ?? \"\")","    ","    let finalBuilder = try ConverseRequestBuilder(from: builder, with: reply)","        .withToolResult(result)","        .withReasoning()","    ","    let finalReply = try await bedrock.converse(with: finalBuilder)","    print(\"Final answer: \\(finalReply)\")","}"]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/BedrockService\/documentation\/BedrockService"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/BedrockService\/documentation\/BedrockService\/Reasoning"},"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"roleHeading":"Article","modules":[{"name":"BedrockService"}],"role":"article","title":"Reasoning"},"seeAlsoSections":[{"identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming","doc:\/\/BedrockService\/documentation\/BedrockService\/Tools"],"title":"Related Documentation","anchor":"Related-Documentation"},{"identifiers":["doc:\/\/BedrockService\/documentation\/BedrockService\/Tools","doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","doc:\/\/BedrockService\/documentation\/BedrockService\/Documents","doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming"],"title":"Advanced Topics","anchor":"Advanced-Topics","generated":true}],"sections":[],"kind":"article","abstract":[{"text":"Access the modelâ€™s reasoning process","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/bedrockservice\/reasoning"]}],"references":{"doc://BedrockService/documentation/BedrockService/Streaming":{"url":"\/documentation\/bedrockservice\/streaming","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Streaming","abstract":[{"type":"text","text":"Get real-time responses with streaming"}],"type":"topic","role":"article","kind":"article","title":"Streaming"},"doc://BedrockService/documentation/BedrockService/Documents":{"url":"\/documentation\/bedrockservice\/documents","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Documents","abstract":[{"type":"text","text":"Process documents with foundation models"}],"type":"topic","role":"article","kind":"article","title":"Documents"},"doc://BedrockService/documentation/BedrockService":{"type":"topic","title":"BedrockService","url":"\/documentation\/bedrockservice","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService","role":"collection","images":[{"type":"icon","identifier":"bedrock.png"}],"kind":"symbol","abstract":[{"type":"text","text":"A Swift library for interacting with Amazon Bedrock foundation models"}]},"doc://BedrockService/documentation/BedrockService/Tools":{"type":"topic","title":"Tools","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Tools","url":"\/documentation\/bedrockservice\/tools","role":"article","kind":"article","abstract":[{"text":"Enable function calling with foundation models","type":"text"}]},"bedrock.png":{"identifier":"bedrock.png","variants":[{"traits":["1x","light"],"url":"\/images\/BedrockService\/bedrock.png"}],"alt":"BedrockService","type":"image"},"doc://BedrockService/documentation/BedrockService/Vision":{"url":"\/documentation\/bedrockservice\/vision","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Vision","abstract":[{"type":"text","text":"Add images to your conversations"}],"type":"topic","role":"article","kind":"article","title":"Vision"},"doc://BedrockService/documentation/BedrockService/Converse":{"url":"\/documentation\/bedrockservice\/converse","identifier":"doc:\/\/BedrockService\/documentation\/BedrockService\/Converse","abstract":[{"type":"text","text":"Build conversational AI applications with the Converse API"}],"type":"topic","role":"article","kind":"article","title":"Converse API"}}}